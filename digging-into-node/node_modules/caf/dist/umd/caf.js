/*! CAF: caf.js
	v13.1.1 (c) 2021 Kyle Simpson
	MIT License: http://getify.mit-license.org
*/
!function UMD(e,n,l,r){"function"==typeof define&&define.amd?(l=Object.values(l),define(e,l,r)):"undefined"!=typeof module&&module.exports?(l=Object.keys(l).map((e=>require(e))),module.exports=r(...l)):(l=Object.values(l).map((e=>n[e])),n[e]=r(...l))}("CAF","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),{"./shared.js":"CAFShared"},(function DEF(e){"use strict";var{CLEANUP_FN:n,TIMEOUT_TOKEN:l,cancelToken:r,signalPromise:a,processTokenOrSignal:u}=e;let i={};function delay(e,n){var l,r;return"number"==typeof e&&"number"!=typeof n&&([n,e]=[e,n]),e&&({tokenOrSignal:e,signal:l,signalPr:r}=u(e)),l&&l.aborted?r:new Promise((function c(e,a){l&&(r.catch((function onAbort(r){u&&(clearTimeout(u),a(r||`delay (${n}) interrupted`)),e=a=u=l=null})),r=null);var u=setTimeout((function onTimeout(){e(`delayed: ${n}`),e=a=u=l=null}),n)}))}function timeout(e,n="Timeout"){e=Number(e)||0;var a=new r;return delay(a.signal,e).then(cleanup,cleanup),Object.defineProperty(a,l,{value:!0,writable:!1,enumerable:!1,configurable:!1}),a;function cleanup(){a.abort(n),a=null}}function signalRace(e){var l=new r,u=e.map(a),i=u.map((e=>e[n]));return Promise.race(u).catch((function c(e){l.abort(e)})).then((function t(){for(let e of i)e();i=l=null})),l.signal}function signalAll(e){var l=new r,u=e.map(a),i=u.map((e=>e[n]));return Promise.all(u.map((function m(e){return e.catch((e=>e))}))).then((function t(e){l.abort(e)})).then((function t(){for(let e of i)e();i=l=null})),l.signal}function runner(e,...n){var l=e.apply(this,n);return e=n=null,{it:l,result:function getNextResult(e){try{var n=l.next(e);e=null}catch(e){return Promise.reject(e)}return function processResult(e){var n=Promise.resolve(e.value);return e.done?l=null:(n=n.then(getNextResult,(function onRejection(e){return Promise.resolve(l.throw(e)).then(processResult)}))).catch((function cleanup(){l=null})),e=null,n}(n)}()}}return i=Object.assign((function CAF(e){return function instance(n,...r){var a,i;if(({tokenOrSignal:n,signal:a,signalPr:i}=u(n)),a.aborted)return i;var o=i.catch((function onCancellation(e){try{var n=s.return();throw void 0!==n.value?n.value:e}finally{s=f=o=d=null}})),{it:s,result:f}=runner.call(this,e,a,...r),d=Promise.race([f,o]);if(n!==a&&n[l]){let e=function cancelTimer(){n.abort(),n=e=null};d.then(e,e)}else d.catch((()=>{})),n=null;return a=r=null,d}}),{cancelToken:r,delay:delay,timeout:timeout,signalRace:signalRace,signalAll:signalAll}),i.cancelToken=r,i.delay=delay,i.timeout=timeout,i.signalRace=signalRace,i.signalAll=signalAll,i}));